---
layout: post
title: "WPF - использование навигации по страницам, добавление контролов в NavigationWindow"
date: 2009-08-06 21:12:00
categories: ru
tags: [.NET, C#, WPF, XAML]
alias: ru/blog/show/149
---
<p>В WPF существует возможность создавать приложения с возможность навигации, то есть с использованием <a href="http://msdn.microsoft.com/en-us/library/ms748811.aspx">Navigation</a> объектов, таких как <a href="http://msdn.microsoft.com/en-us/library/system.windows.controls.page.aspx">Page</a>, <a href="http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.aspx">NavigationService</a> и <a href="http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow.aspx">NavigationWindow</a>. Большинство примеров на MSDN отображает, как использовать такие объекты в <a href="http://msdn.microsoft.com/en-us/library/aa970060.aspx">XBAP</a> приложениях, но никто не запрещает нам и создавать клиентские приложения с использованием навигации по страницам.   </p>    

<p>Итак, постараемся создать такое приложение. Создаем новый WPF Application проект, оттуда удаляем созданное Window1.xaml, добавляем две страницы FirstPage.xaml и SecondPage.xaml, а так же прописываем в App.xaml файл страницу, с которой наше приложение будет стартовать:   </p>    

<div id="codeSnippetWrapper" style="background-color: #f4f4f4;color: black;font-family: 'Courier New', Courier, Monospace;	font-size: 9pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; overflow: auto; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" >
<pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">StartupUri="FirstPage.xaml"</pre><!--CRLF--></div></div>

<p>После запуска мы должны увидеть окно нашего приложения, содержащее навигационную панель с кнопками перехода вперед и назад. Дальше, нам необходимо создать ссылки, которые помогали бы переходить с одной страницы на другую. Это можно сделать разными способами.</p> 

<p>Добавим в проект UserControl и назовем его ApplicationToolbar. Первая возможность, при помощи которой мы сможем осуществлять переход между страницами это использование <a href="http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.aspx">NavigationService</a>, создадим для этого метод обработки нажатий на кнопки со следующим кодом:</p>  

<div id="codeSnippetWrapper" style="background-color: #f4f4f4;color: black;font-family: 'Courier New', Courier, Monospace;	font-size: 9pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; overflow: auto; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" >
<pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">void</span> NavigationCommand_Executed(<span style="color: #0000ff;">object</span> sender, ExecutedRoutedEventArgs e) </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">{ </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  NavigationService service = NavigationService.GetNavigationService(<span style="color: #0000ff;">this</span>); </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  service.Navigate(<span style="color: #0000ff;">new</span> Uri(e.Parameter.ToString(), UriKind.Relative)); </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">}</pre><!--CRLF--></div></div>

<p>Метод осуществляет переход на страницу, которая указана в параметрах команды. В xaml файле контрола ApplicationToolbar создадим команду, привяжем к ней данный метод и укажем кнопкам данную команду на выполнение:   </p>  

<div id="codeSnippetWrapper" style="background-color: #f4f4f4;color: black;font-family: 'Courier New', Courier, Monospace;	font-size: 9pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; overflow: auto; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" >
<pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">UserControl</span> <span style="color: #ff0000;">x:Class</span><span style="color: #0000ff;">="WPF_NavigationWindow.ApplicationToolbar"</span> <span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span> <span style="color: #ff0000;">xmlns:x</span><span style="color: #0000ff;">="http://schemas.microsoft.com/winfx/2006/xaml"</span> <span style="color: #ff0000;">Height</span><span style="color: #0000ff;">="Auto"</span> <span style="color: #ff0000;">Width</span><span style="color: #0000ff;">="Auto"</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">UserControl.Resources</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #008000;">&lt;!-- Команда для обработки нажатий клавиш --&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">RoutedCommand</span> <span style="color: #ff0000;">x:Key</span><span style="color: #0000ff;">="NavigationCommand"</span> <span style="color: #0000ff;">/&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">UserControl.Resources</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">UserControl.CommandBindings</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #008000;">&lt;!-- Биндинг методов к команде --&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">CommandBinding</span> <span style="color: #ff0000;">Command</span><span style="color: #0000ff;">="{StaticResource NavigationCommand}"</span> <span style="color: #ff0000;">Executed</span><span style="color: #0000ff;">="NavigationCommand_Executed"</span> <span style="color: #0000ff;">/&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">UserControl.CommandBindings</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ToolBar</span> <span style="color: #ff0000;">HorizontalAlignment</span><span style="color: #0000ff;">="Right"</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #008000;">&lt;!-- Навигация по страницам осуществляется при помощи обычных кнопок и команд --&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Button</span> <span style="color: #ff0000;">CommandParameter</span><span style="color: #0000ff;">="FirstPage.xaml"</span> <span style="color: #ff0000;">Command</span><span style="color: #0000ff;">="{StaticResource NavigationCommand}"</span><span style="color: #0000ff;">&gt;</span>First Page<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Button</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Button</span> <span style="color: #ff0000;">CommandParameter</span><span style="color: #0000ff;">="SecondPage.xaml"</span> <span style="color: #ff0000;">Command</span><span style="color: #0000ff;">="{StaticResource NavigationCommand}"</span><span style="color: #0000ff;">&gt;</span>Second Page<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Button</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ToolBar</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">UserControl</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--></div></div>

<P>
Таким образом мы создали панель с кнопками перехода между страницами. Можно пользоваться и более простым решением - <a href="http://msdn.microsoft.com/en-us/library/system.windows.documents.hyperlink.aspx">Hyperlink</a>, давайте добавим и его на наш контрол:   </p>     

<div id="codeSnippetWrapper" style="background-color: #f4f4f4;color: black;font-family: 'Courier New', Courier, Monospace;	font-size: 9pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; overflow: auto; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" >
<pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ToolBarPanel</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">TextBlock</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Hyperlink</span> <span style="color: #ff0000;">NavigateUri</span><span style="color: #0000ff;">="FirstPage.xaml"</span><span style="color: #0000ff;">&gt;</span>First Page<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Hyperlink</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Hyperlink</span> <span style="color: #ff0000;">NavigateUri</span><span style="color: #0000ff;">="SecondPage.xaml"</span><span style="color: #0000ff;">&gt;</span>Second Page<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Hyperlink</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">TextBlock</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ToolBarPanel</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--></div></div>

<p>
Итак, в результате мы должны получить, приблизительно, следующий вид окна:   </p>   

<p><img width="475" height="317" border="0" style="border-width: 0px;" alt="Untitled" src="/library/images/01/0000039.png" />  </p>   

<p>Тут возникает следующее желание, положить наш контрол ApplicationToolbar на <a href="http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow.aspx">NavigationWindow</a> (там, где располагаются навигационные кнопки). Сделать нам это поможет возможность переопределение стилей в WPF. А именно переопределение стиля для <a href="http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow.aspx">NavigationWindow</a>.   </p>     <p>Для того, чтобы описать новый стиль для <a href="http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow.aspx">NavigationWindow</a>, а точнее переписать существующий, нам изначально необходимо вытащить стиль из библиотек <i>PresentationFramework</i>. Вообще у <i>PresentationFramework </i>есть несколько наборов тем, таких как Classic, Aero, Royale и Luna, каждая тема лежит в отдельной библиотеке. Я буду рассматривать библиотеку <i>PresentationFramework.Aero</i> с ее темой. Для того, чтобы посмотреть BAML файл (после компиляции файл xaml упаковывается в baml - Binary Application Markup) можно воспользоваться программой <a href="http://www.red-gate.com/products/reflector/">Reflector</a> с плагином <a href="http://www.codeplex.com/reflectoraddins">BamlViewer</a>, но как показала практика - BamlViewer не очень хорошо справляется с декомпиляцией: он не верно прописывает имена ключей (Key), не верно расшифровывает данные <a href="http://msdn.microsoft.com/en-us/library/ms751808.aspx">Geometry</a>, даже располагает описание триггеров перед описание контента стиля - из-за чего элементы в триггерах не находятся. В общем, лучше с задачей декомпиляции BAML справляется <a href="http://www.codeplex.com/stylesexplorer">StyleExplorer</a>. Вот небольшой скриншот сравнения данных программ:   </p>    

<p><img width="640" height="297" border="0" style="border-width: 0px;" alt="Untitled2" src="/library/images/01/0000040.png" />  </p>   

<p>Самое интересное, что значение ключей стилей действительно такими и являются как видно на скриншоте - x:Key=&quot;&Igrave;&quot;. То есть в своих стилях мы можем ссылаться на стиль с именем ключа &Igrave; (если стиль подключили). Почему сделаны такие странные имена ключей - не понятно (и видно так же, что BAML Viewer не верно их распознает). В итоге, Style Explorer предоставляет нам реально работающий XAML текст - мы можем к примеру перенести к себе в проект весь XAML текст и он будет валиден, чего не скажешь о BAML Viewer. Но весь XAML нам не нужен. Нам интересно переписать представление NavigationWindow, для этого мы изначально создадим в нашем проекте новый файл ресурсов Themes/General.xaml (имя файла и каталог можно выбрать любыми). Чтобы наш файл ресурсов был доступен в приложении - мы должны его так же подключить в файле App.xaml, это делается так:   </p>     

<div id="codeSnippetWrapper" style="background-color: #f4f4f4;color: black;font-family: 'Courier New', Courier, Monospace;	font-size: 9pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; overflow: auto; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" >
<pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Application</span> <span style="color: #ff0000;">x:Class</span><span style="color: #0000ff;">="WPF_NavigationWindow.App"</span> <span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span> <span style="color: #ff0000;">xmlns:x</span><span style="color: #0000ff;">="http://schemas.microsoft.com/winfx/2006/xaml"</span> <span style="color: #ff0000;">StartupUri</span><span style="color: #0000ff;">="FirstPage.xaml"</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Application.Resources</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ResourceDictionary</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ResourceDictionary.MergedDictionaries</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">        <span style="color: #008000;">&lt;!-- Путь до нашего ресурса --&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ResourceDictionary</span> <span style="color: #ff0000;">Source</span><span style="color: #0000ff;">="Themes/General.xaml"</span><span style="color: #0000ff;">/&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">      <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ResourceDictionary.MergedDictionaries</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ResourceDictionary</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Application.Resources</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Application</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--></div></div>

<p>
В файле General.xaml мы так же должны подключить файл ресурсов из библиотеки PresentationFramework.Aero, чтобы мы могли в стиле нашего будущего NavigationManager использовать уже существующие стили от темы Aero. Делается это таким же способом:   </p>   

<div id="codeSnippetWrapper" style="background-color: #f4f4f4;color: black;font-family: 'Courier New', Courier, Monospace;	font-size: 9pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; overflow: auto; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" >
<pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ResourceDictionary.MergedDictionaries</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ResourceDictionary</span> <span style="color: #ff0000;">Source</span><span style="color: #0000ff;">="/PresentationFramework.Aero;V3.0.0.0;31bf3856ad364e35;component/themes/Aero.NormalColor.xaml"</span><span style="color: #0000ff;">/&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ResourceDictionary.MergedDictionaries</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--></div></div>

<p>Далее из Style Explorer копируем стиль для NavigationWindow, а так же его ContentTemplate (который используется в стиле). ContentTemplate мы немного изменим, а точнее добавим наш контрол ApplicationToolbar в него, больше ничего делать не будем. Заметим, что ссылки на ресурсы вида &igrave;, d, &ecirc; остаются и они будут работать. В результате у нас должен получится, приблизительно, такой набор стилей (большую часть закомментировал, там все остается то, что дал нам Style Explorer):   </p>   

<div id="codeSnippetWrapper" style="background-color: #f4f4f4;color: black;font-family: 'Courier New', Courier, Monospace;	font-size: 9pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; overflow: auto; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" >
<pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ControlTemplate</span> <span style="color: #ff0000;">x:Key</span><span style="color: #0000ff;">="d"</span> <span style="color: #ff0000;">TargetType</span><span style="color: #0000ff;">="{x:Type NavigationWindow}"</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Border</span> <span style="color: #ff0000;">Background</span><span style="color: #0000ff;">="{TemplateBinding Control.Background}"</span> <span style="color: #ff0000;">BorderBrush</span><span style="color: #0000ff;">="{TemplateBinding Control.BorderBrush}"</span> <span style="color: #ff0000;">BorderThickness</span><span style="color: #0000ff;">="{TemplateBinding Control.BorderThickness}"</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">DockPanel</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Grid</span> <span style="color: #ff0000;">Name</span><span style="color: #0000ff;">="NavChrome"</span> <span style="color: #ff0000;">Background</span><span style="color: #0000ff;">="{StaticResource e}"</span> <span style="color: #ff0000;">DockPanel</span>.<span style="color: #ff0000;">Dock</span><span style="color: #0000ff;">="Top"</span> <span style="color: #ff0000;">Height</span><span style="color: #0000ff;">="30"</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Grid.ColumnDefinitions</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">          <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ColumnDefinition</span> <span style="color: #ff0000;">Width</span><span style="color: #0000ff;">="29"</span> <span style="color: #0000ff;">/&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">          <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ColumnDefinition</span> <span style="color: #ff0000;">Width</span><span style="color: #0000ff;">="26"</span> <span style="color: #0000ff;">/&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">          <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ColumnDefinition</span> <span style="color: #ff0000;">Width</span><span style="color: #0000ff;">="17"</span> <span style="color: #0000ff;">/&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">          <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ColumnDefinition</span> <span style="color: #ff0000;">Width</span><span style="color: #0000ff;">="*"</span> <span style="color: #0000ff;">/&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">        <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Grid.ColumnDefinitions</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">        <span style="color: #008000;">&lt;!-- ... --&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">&nbsp;</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">        <span style="color: #008000;">&lt;!-- Наш добавленный контрол --&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">WPF_NavigationWindow:ApplicationToolbar</span> <span style="color: #ff0000;">Grid</span>.<span style="color: #ff0000;">Row</span><span style="color: #0000ff;">="0"</span> <span style="color: #ff0000;">Grid</span>.<span style="color: #ff0000;">Column</span><span style="color: #0000ff;">="3"</span> <span style="color: #ff0000;">HorizontalAlignment</span><span style="color: #0000ff;">="Right"</span><span style="color: #0000ff;">/&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">      <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Grid</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">&nbsp;</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">      <span style="color: #008000;">&lt;!-- ... --&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">DockPanel</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Border</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">ControlTemplate.Triggers</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #008000;">&lt;!-- ... --&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ControlTemplate.Triggers</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">ControlTemplate</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">&nbsp;</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Style</span> <span style="color: #ff0000;">x:Key</span><span style="color: #0000ff;">="{x:Type NavigationWindow}"</span> <span style="color: #ff0000;">TargetType</span><span style="color: #0000ff;">="{x:Type NavigationWindow}"</span><span style="color: #0000ff;">&gt;</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #008000;">&lt;!-- ... --&gt;</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Style</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--></div></div>

<p>В результате наше приложение будет выглядеть следующим образом:   </p>   

<p><img width="438" height="187" border="0" align="middle" style="border-width: 0px;" alt="Untitled3" src="/library/images/01/0000041.png" /></p> 

<p>  Как видим, мы добились того, что наш контрол ApplicationToolbar теперь располагается на навигационной панели.   </p>        <h4>Скачать пример: <a href="/library/content/01/WPF_NavigationWindow.zip">WPF_NavigationWindow.zip (12,64 KB)</a></h4>
