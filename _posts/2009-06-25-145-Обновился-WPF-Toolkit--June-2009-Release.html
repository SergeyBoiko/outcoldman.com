---
layout: post
title: "Обновился WPF Toolkit. June 2009 Release"
date: 2009-06-25 19:47:00
categories: ru
tags: [WPF, MS Chart, XAML, .NET. C#]
permalink: ru/blog/show/145
---
<p>Скачать новый Release <strong>WPF&nbsp;Toolkit</strong> можно <a href="http://wpf.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=29117">отсюда</a>. Из нового там пофиксили некоторый набор багов (около 5) и самое главное там появились контролы для рисования графиков!</p>  

<p>Я уже попробовал сделать небольшой примерчик, который рисует следующий график:</p>   

<p><a href="/library/images/01/0000019.png"><img width="643" height="404" border="0" alt="" src="/library/images/01/0000019.png" /></a></p> 

<p>Для того, чтобы построить данный график сначала необходимо подготовить данные: для этого создадим класс данных Data представляющий из себя набор (Название, Значение), а так же создадим класс Model, который будет просто возвращать нам список подготовленных данных:</p>  

<div id="codeSnippetWrapper" style="background-color: #f4f4f4;color: black;font-family: 'Courier New', Courier, Monospace;	font-size: 9pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; overflow: auto; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" >
<pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> Data</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">{</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">public</span> Data(<span style="color: #0000ff;">string</span> name, <span style="color: #0000ff;">int</span> <span style="color: #0000ff;">value</span>)</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  {</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    Name = name;</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    Value = <span style="color: #0000ff;">value</span>;</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  }</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">&nbsp;</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> Name { get; set; }</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span> Value { get; set; }</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">}</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">&nbsp;</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">class</span> Model</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">{</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">public</span> IList&lt;Data&gt; Data</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  {</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    get </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    {</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">      IList&lt;Data&gt; list = <span style="color: #0000ff;">new</span> List&lt;Data&gt;</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">                  {</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">                    <span style="color: #0000ff;">new</span> Data(<span style="color: #006080;">"First"</span>, 70),</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">                    <span style="color: #0000ff;">new</span> Data(<span style="color: #006080;">"Second"</span>, 20),</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">                    <span style="color: #0000ff;">new</span> Data(<span style="color: #006080;">"Third"</span>, 10)</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">                  };</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">      <span style="color: #0000ff;">return</span> list;</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    }</pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  }</pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">}</pre><!--CRLF--></div></div>

<p>Итак данные есть, остается только положить на нашу форму контрол Chart и установить в качестве данных нашу модель:</p>   

<div id="codeSnippetWrapper" style="background-color: #f4f4f4;color: black;font-family: 'Courier New', Courier, Monospace;	font-size: 9pt; line-height: 12pt; border: solid 1px silver; cursor: text; margin: 20px 0px 10px 0px; overflow: auto; padding: 4px; width: 97.5%; direction: ltr; text-align: left;"><div id="codeSnippet" >
<pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Window</span> <span style="color: #ff0000;">x:Class</span><span style="color: #0000ff;">="WpfApplicationChart.WindowChartSample"</span></pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #ff0000;">xmlns:x</span><span style="color: #0000ff;">="http://schemas.microsoft.com/winfx/2006/xaml"</span></pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #ff0000;">Title</span><span style="color: #0000ff;">="WindowChartSample"</span> <span style="color: #ff0000;">Height</span><span style="color: #0000ff;">="327"</span> <span style="color: #ff0000;">Width</span><span style="color: #0000ff;">="505"</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #ff0000;">xmlns:chartingToolkit</span><span style="color: #0000ff;">="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"</span> </pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #ff0000;">xmlns:WpfApplicationChart</span><span style="color: #0000ff;">="clr-namespace:WpfApplicationChart"</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Window.Resources</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">WpfApplicationChart:Model</span> <span style="color: #ff0000;">x:Key</span><span style="color: #0000ff;">="model"</span> <span style="color: #0000ff;">/&gt;</span></pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Window.Resources</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Grid</span> <span style="color: #ff0000;">DataContext</span><span style="color: #0000ff;">="{Binding Source={StaticResource model}}"</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">chartingToolkit:Chart</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">chartingToolkit:PieSeries</span> <span style="color: #ff0000;">ItemsSource</span><span style="color: #0000ff;">="{Binding Path=Data}"</span> </pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">          <span style="color: #ff0000;">DependentValuePath</span><span style="color: #0000ff;">="Value"</span> <span style="color: #ff0000;">IndependentValuePath</span><span style="color: #0000ff;">="Name"</span> <span style="color: #0000ff;">/&gt;</span></pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">chartingToolkit:Chart</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--><pre style="background-color: white;border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;">  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Grid</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--><pre style="border-style: none; overflow: visible; padding: 0px; width: 100%; margin: 0em;"><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Window</span><span style="color: #0000ff;">&gt;</span></pre><!--CRLF--></div></div>

<p>Вот и все. Пример готов. Скачать его можно <a href="http://cid-ed105c18939cfcb7.skydrive.live.com/self.aspx/LiveJournal/WpfApplicationChart|_Sample|_WPFToolkit|_June|_20009.zip">отсюда</a>. Постараюсь в будущем сделать более подробный обзор данных контролов, так как документации по нему что то не нашел, а интересно, что же он может.</p>
